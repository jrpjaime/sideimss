
<div class="row">
  <div class="col-12">
    <h3 class="mb-0">Solicitud de Baja</h3>
    <hr class="red">
  </div>
</div>

<div class="container-fluid mt-3">

  @if (loading) {
    <div class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p>Cargando datos del contador...</p>
    </div>
  } @else if (error) {
    <div class="alert alert-danger" role="alert">
      {{ error }}
      <button type="button" class="btn btn-primary btn-sm ms-3" (click)="cargarDatosContador()">Reintentar</button>
    </div>
  } @else if (solicitudBajaData) {
    <p>El folio de la solicitud es: <strong>{{ solicitudBajaData.folioSolicitud }}</strong></p>
    <p>Paso 1 de 2: Datos Personales</p>

    <!-- SECCIÓN DE DATOS PERSONALES -->
    <div class="card mb-3">
      <div class="card-header bg-light">
        <strong>Datos personales</strong>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">RFC</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.rfc }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">CURP</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.curp }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Apellido paterno</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.apellidoPaterno }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Apellido materno</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.apellidoMaterno }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Nombre(s)</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.nombre }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Registro IMSS</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.registroIMSS }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Estatus</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.estatus }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Delegación</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.delegacion }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Subdelegación</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosPersonalesDto.subdelegacion }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- SECCIÓN DE DOMICILIO FISCAL -->
    <div class="card mb-3">
      <div class="card-header bg-light">
        <strong>Domicilio fiscal</strong>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Calle</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.calle }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Número exterior</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.numeroExterior }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Número interior</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.numeroInterior }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Entre la calle de</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.entreCalle }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Y la calle de</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.yCalle }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Colonia (asentamiento)</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.colonia }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Localidad</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.localidad }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Municipio o delegación</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.municipioODelegacion }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Entidad federativa</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.entidadFederativa }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Código postal</label>
            <p class="form-value-custom">{{ solicitudBajaData.domicilioFiscalDto.codigoPostal }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- SECCIÓN DE DATOS DE CONTACTO -->
    <div class="card mb-3">
      <div class="card-header bg-light">
        <strong>Datos de contacto</strong>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Correo electrónico 1</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosContactoDto.correoElectronico1 }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Teléfono</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosContactoDto.telefono1 }}</p>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Correo electrónico 2</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosContactoDto.correoElectronico2 }}</p>
          </div>
          <div class="col-sm-6">
            <label class="form-label-custom">Correo electrónico 3</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosContactoDto.correoElectronico3 }}</p>
          </div>
        </div>
        <!-- Si tienes telefono2 en tu DTO, lo puedes añadir aquí -->
        <div class="row mb-2">
          <div class="col-sm-6">
            <label class="form-label-custom">Teléfono 2</label>
            <p class="form-value-custom">{{ solicitudBajaData.datosContactoDto.telefono2 }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- SECCIÓN DE MOTIVO DE BAJA -->
    <div class="card mb-3">
      <div class="card-header bg-light">
        <strong>Motivo de baja</strong>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-12">
            <p class="form-label-custom">* El motivo de la solicitud baja:</p>
            <textarea
              class="form-control"
              rows="3"
              placeholder="Ingresa el motivo de la baja aquí..."
              [(ngModel)]="motivoBaja"
              (input)="actualizarCaracteresRestantes()"
              maxlength="100"
            ></textarea>
            <small class="form-text text-muted">{{ caracteresRestantes }} caracteres restantes.</small>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-12 d-flex justify-content-end">
        <p class="me-3">* Campo obligatorio</p>
        <button type="button" class="btn btn-secondary me-2" (click)="onCancelar()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="continuarConAcuse()" [disabled]="!motivoBaja || motivoBaja.trim().length === 0 || !folioSolicitud">Siguiente</button>
      </div>
    </div>

  } @else {
    <p class="text-center">No hay datos disponibles para mostrar.</p>
  }
</div>
